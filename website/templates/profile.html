{% extends "base.html" %} {% block title %}Profile{% endblock %}
{% block content %} 
    
<div class="text-center">
    <h1 style="color: #3A0b0b; font-family: 'Times New Roman', Times, serif;"><strong>Your Profile</strong></h1>
    <br/>
    <div style="background-color: #fff; border: 2px solid #6A2C2E; border-radius: 10px; padding: 20px; max-width: 600px; margin: 0 auto;">
        <h3 style="color: #3A0b0b; font-family: 'Times New Roman', Times, serif;">{{ user.username }}</h3>
        <p style="color: #6A2C2E; font-family: 'Times New Roman', Times, serif;">
            Registered Email: {{ user.email }}
        </p>
        <p style="color: #6A2C2E; font-family: 'Times New Roman', Times, serif;">
            Member since: {{ user.account_creation_date.strftime('%B %d, %Y') if user.account_creation_date else 'Unknown' }}
        </p>
        <hr/>
        <h4 style="color: #3A0b0b; font-family: 'Times New Roman', Times, serif;"><strong>Contest Wins</strong></h4>
        <p style="color: #6A2C2E; font-family: 'Times New Roman', Times, serif;">
            ðŸ¥‡ 1st Place: {{ user.first_place_wins or 0 }}<br/>
            ðŸ¥ˆ 2nd Place: {{ user.second_place_wins or 0 }}<br/>
            ðŸ¥‰ 3rd Place: {{ user.third_place_wins or 0 }}
        </p>
    </div>
</div>
<br/>
<br/>

<h2 style="color: #3A0b0b; font-family: 'Times New Roman', Times, serif;"><strong>Your Submissions</strong></h2>

{% if user.submissions %}
    {% for submission in user.submissions|reverse %}
    <div style="background-color: #fff; border: 2px solid #6A2C2E; border-radius: 10px; padding: 20px; margin: 20px 0;">
        <div class="row">
            <div class="col-md-6">
                {% if submission.filename %}
                    <img src="{{url_for('static', filename='uploaded_images/' + submission.filename)}}" 
                         alt="{{submission.submission_name}}" 
                         style="max-width: 100%; max-height: 400px; object-fit: contain; border-radius: 5px;"/>
                {% endif %}
            </div>
            <div class="col-md-6">
                <h3 style="color: #3A0b0b; font-family: 'Times New Roman', Times, serif;">
                    <strong>{{ submission.submission_name or 'Untitled' }}</strong>
                </h3>
                <p style="color: #6A2C2E; font-family: 'Times New Roman', Times, serif;">
                    <strong>Prompt:</strong> {{ submission.prompt }}<br/>
                    <strong>Submitted:</strong> {{ submission.submission_time.strftime('%B %d, %Y at %I:%M %p') if submission.submission_time else 'Unknown' }}<br/>
                    <strong>Total Score:</strong> {{ submission.score or 0 }} points
                </p>
                <hr/>
                <p style="color: #6A2C2E; font-family: 'Times New Roman', Times, serif;">
                    <strong>Vote Breakdown:</strong><br/>
                    ðŸ¥‡ 1st Place: {{ submission.first_place_votes or 0 }} votes ({{ (submission.first_place_votes or 0) * 5 }} points)<br/>
                    ðŸ¥ˆ 2nd Place: {{ submission.second_place_votes or 0 }} votes ({{ (submission.second_place_votes or 0) * 3 }} points)<br/>
                    ðŸ¥‰ 3rd Place: {{ submission.third_place_votes or 0 }} votes ({{ (submission.third_place_votes or 0) * 1 }} points)
                </p>
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="alert alert-info">
        <p style="color: #3A0b0b; font-family: 'Times New Roman', Times, serif;">
            You haven't submitted any artwork yet. Visit the <a href="/contest">Art Contest</a> page to make your first submission!
        </p>
    </div>
{% endif %}

{% endblock %}